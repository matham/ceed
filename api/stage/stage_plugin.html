<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stage plugins &mdash; Ceed  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Stage widgets" href="widgets.html" />
    <link rel="prev" title="Stage" href="stage.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Ceed
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../blueprint.html">System Blueprint</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../config.html">CEED Config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../example_code/example_code.html">Example Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apps/apps.html">Ceed Apps</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">The Ceed API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ceed.html">Ceed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analysis/api.html">Analysis API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../function/api.html">Function API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shape/api.html">Shape API</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="api.html">Stage API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="stage.html">Stage</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Stage plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="widgets.html">Stage widgets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../view/api.html">Experiment API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/api.html">Storage API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../player.html">Video Player</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../graphics/api.html">Graphics API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../optics/optics.html">Microscope optics V2</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Ceed</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../api.html">The Ceed API</a> &raquo;</li>
          <li><a href="api.html">Stage API</a> &raquo;</li>
      <li>Stage plugins</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/api/stage/stage_plugin.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <span class="target" id="module-ceed.stage.plugin"></span><section id="stage-plugins">
<span id="stage-plugin"></span><h1>Stage plugins<a class="headerlink" href="#stage-plugins" title="Permalink to this headline"></a></h1>
<p>Defines a plugin architecture so that new stages can be defined at runtime
and made available to the <a class="reference internal" href="stage.html#ceed.stage.StageFactoryBase" title="ceed.stage.StageFactoryBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">StageFactoryBase</span></code></a>
used in the GUI to list available stages, and for <code class="xref py py-mod docutils literal notranslate"><span class="pre">analysis</span></code>.</p>
<p><a class="reference internal" href="stage.html#ceed.stage.register_all_stages" title="ceed.stage.register_all_stages"><code class="xref py py-func docutils literal notranslate"><span class="pre">ceed.stage.register_all_stages()</span></code></a> is called by the GUI and it
registers any plugin stages with the
<a class="reference internal" href="stage.html#ceed.stage.StageFactoryBase" title="ceed.stage.StageFactoryBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ceed.stage.StageFactoryBase</span></code></a> used by the GUI for managing
stages. <a class="reference internal" href="stage.html#ceed.stage.register_all_stages" title="ceed.stage.register_all_stages"><code class="xref py py-func docutils literal notranslate"><span class="pre">ceed.stage.register_all_stages()</span></code></a> internally calls
<a class="reference internal" href="#ceed.stage.plugin.get_plugin_stages" title="ceed.stage.plugin.get_plugin_stages"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_plugin_stages()</span></code></a> to get all the stages exported by all the
Python plugin module files in the <code class="docutils literal notranslate"><span class="pre">ceed/stage/plugin</span></code> directory and
registers them with the <a class="reference internal" href="stage.html#ceed.stage.StageFactoryBase" title="ceed.stage.StageFactoryBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ceed.stage.StageFactoryBase</span></code></a>.</p>
<p>Additionally, if the user provides a package name in the
<a class="reference internal" href="../../apps/main.html#ceed.main.CeedApp.external_stage_plugin_package" title="ceed.main.CeedApp.external_stage_plugin_package"><code class="xref py py-attr docutils literal notranslate"><span class="pre">external_stage_plugin_package</span></code></a> configuration
variable, the GUI will similarly import and register the plugins in
that package with <a class="reference internal" href="stage.html#ceed.stage.register_external_stages" title="ceed.stage.register_external_stages"><code class="xref py py-func docutils literal notranslate"><span class="pre">ceed.stage.register_external_stages()</span></code></a>.
The package must however be a proper python package that can be imported.
E.g. if <a class="reference internal" href="../../apps/main.html#ceed.main.CeedApp.external_stage_plugin_package" title="ceed.main.CeedApp.external_stage_plugin_package"><code class="xref py py-attr docutils literal notranslate"><span class="pre">external_stage_plugin_package</span></code></a>
is <code class="docutils literal notranslate"><span class="pre">my_ceed_plugin.stage</span></code>, Ceed will try something roughly like
<code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">my_ceed_plugin.stage</span> <span class="pre">import</span> <span class="pre">get_ceed_stages</span></code>.</p>
<p>Files in <code class="docutils literal notranslate"><span class="pre">ceed/stage/plugin</span></code> that want to define new stage classes should
define a function in the file called <code class="docutils literal notranslate"><span class="pre">get_ceed_stages</span></code> that
returns a list of stages that will be automatically registered with the stage
factory <a class="reference internal" href="stage.html#ceed.stage.StageFactoryBase" title="ceed.stage.StageFactoryBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">StageFactoryBase</span></code></a> using
<a class="reference internal" href="stage.html#ceed.stage.StageFactoryBase.register" title="ceed.stage.StageFactoryBase.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register()</span></code></a>.</p>
<p>To write a plugin, familiarize yourself with
<a class="reference internal" href="stage.html#ceed.stage.CeedStage" title="ceed.stage.CeedStage"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedStage</span></code></a>, it’s properties, and relevant methods that
need to be overridden. Some relevant methods are
<a class="reference internal" href="../function/function.html#ceed.function.FuncBase.get_gui_props" title="ceed.function.FuncBase.get_gui_props"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_gui_props()</span></code></a>,
<a class="reference internal" href="../function/function.html#ceed.function.FuncBase.get_state" title="ceed.function.FuncBase.get_state"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_state()</span></code></a>,
<a class="reference internal" href="../function/function.html#ceed.function.FuncBase.get_noise_supported_parameters" title="ceed.function.FuncBase.get_noise_supported_parameters"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_noise_supported_parameters()</span></code></a>,
<a class="reference internal" href="../function/function.html#ceed.function.FuncBase.get_prop_pretty_name" title="ceed.function.FuncBase.get_prop_pretty_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_prop_pretty_name()</span></code></a>,
<a class="reference internal" href="../function/function.html#ceed.function.FuncBase.init_func_tree" title="ceed.function.FuncBase.init_func_tree"><code class="xref py py-meth docutils literal notranslate"><span class="pre">init_func_tree()</span></code></a>,
<a class="reference internal" href="../function/function.html#ceed.function.FuncBase.init_func" title="ceed.function.FuncBase.init_func"><code class="xref py py-meth docutils literal notranslate"><span class="pre">init_func()</span></code></a>,
<a class="reference internal" href="../function/function.html#ceed.function.FuncBase.init_loop_iteration" title="ceed.function.FuncBase.init_loop_iteration"><code class="xref py py-meth docutils literal notranslate"><span class="pre">init_loop_iteration()</span></code></a>,
<a class="reference internal" href="../function/function.html#ceed.function.FuncBase.get_relative_time" title="ceed.function.FuncBase.get_relative_time"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_relative_time()</span></code></a>, and
<a class="reference internal" href="../function/function.html#ceed.function.FuncBase.resample_parameters" title="ceed.function.FuncBase.resample_parameters"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resample_parameters()</span></code></a>.</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">__call__()</span></code> is how the function is called. It
takes the time in global time so it should convert it to function local time
with <a class="reference internal" href="../function/function.html#ceed.function.FuncBase.get_relative_time" title="ceed.function.FuncBase.get_relative_time"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_relative_time()</span></code></a> and then return the
function value.</p>
<p>See the <code class="docutils literal notranslate"><span class="pre">ceed/stage/plugin/__init__.py</span></code> file and
<a class="reference internal" href="#ceed.stage.plugin.get_ceed_stages" title="ceed.stage.plugin.get_ceed_stages"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_ceed_stages()</span></code></a> for an example plugin (currently the internal plugin
doesn’t actually define any new stages).</p>
<dl class="py function">
<dt class="sig sig-object py" id="ceed.stage.plugin.get_plugin_stages">
<span class="sig-prename descclassname"><span class="pre">ceed.stage.plugin.</span></span><span class="sig-name descname"><span class="pre">get_plugin_stages</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stage_factory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="stage.html#ceed.stage.StageFactoryBase" title="ceed.stage.StageFactoryBase"><span class="pre">ceed.stage.StageFactoryBase</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_package</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">pathlib.Path</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="stage.html#ceed.stage.StageType" title="ceed.stage.StageType"><span class="pre">ceed.stage.StageType</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#ceed.stage.plugin.get_plugin_stages" title="Permalink to this definition"></a></dt>
<dd><p>Imports all the <code class="docutils literal notranslate"><span class="pre">.py</span></code> files in the given directory and sub-directories
for the named package that don’t start with a underscore (except for
<code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> of course, which is imported). For each imported module,
it calls its <code class="docutils literal notranslate"><span class="pre">get_ceed_stages</span></code>
function (if they are defined in the module) which should return a list
(that can be empty) of all the stages classes exported by the module.</p>
<p>It then returns all these exported stages and all the file contents in the
folder.</p>
<p>Ceed will automatically import all the plugins under
<code class="docutils literal notranslate"><span class="pre">ceed/stage/plugin</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stage_factory</strong> – The
<a class="reference internal" href="stage.html#ceed.stage.StageFactoryBase" title="ceed.stage.StageFactoryBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">StageFactoryBase</span></code></a> instance with which the
returned plugin stages will be registered.</p></li>
<li><p><strong>base_package</strong> – The package name from which the plugins will be
imported. E.g. to import the plugins in <code class="docutils literal notranslate"><span class="pre">ceed/stage/plugin</span></code>,
<code class="docutils literal notranslate"><span class="pre">base_package</span></code> is <code class="docutils literal notranslate"><span class="pre">ceed.stage.plugin</span></code> because that’s the package
containing name for the <code class="docutils literal notranslate"><span class="pre">plugin</span></code> directory. Then, they are imported
as <code class="docutils literal notranslate"><span class="pre">ceed.stage.plugin</span></code> and <code class="docutils literal notranslate"><span class="pre">ceed.stage.plugin.xyz</span></code>, if
the plugin directory also contains a <code class="docutils literal notranslate"><span class="pre">xyz.py</span></code> plugin file.</p></li>
<li><p><strong>root</strong> – The full directory path that contains the plugins. E.g.
for <code class="docutils literal notranslate"><span class="pre">ceed.stage.plugin</span></code> it is <code class="docutils literal notranslate"><span class="pre">ceed/stage/plugin</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>A tuple with two values containing: a list of stage classes
exported by all the modules and a list containing all the python files
contents encountered in the directory.</p>
<p>The python files contents are returned so that Ceed can store it in the
data files in case the plugins are changed between experimental runs.</p>
<p>See <a class="reference internal" href="#ceed.stage.plugin.get_ceed_stages" title="ceed.stage.plugin.get_ceed_stages"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_ceed_stages()</span></code></a> and <a class="reference internal" href="stage.html#ceed.stage.register_all_stages" title="ceed.stage.register_all_stages"><code class="xref py py-func docutils literal notranslate"><span class="pre">register_all_stages()</span></code></a>
for an example how it’s used.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ceed.stage.plugin.get_ceed_stages">
<span class="sig-prename descclassname"><span class="pre">ceed.stage.plugin.</span></span><span class="sig-name descname"><span class="pre">get_ceed_stages</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stage_factory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="stage.html#ceed.stage.StageFactoryBase" title="ceed.stage.StageFactoryBase"><span class="pre">ceed.stage.StageFactoryBase</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="stage.html#ceed.stage.StageType" title="ceed.stage.StageType"><span class="pre">ceed.stage.StageType</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#ceed.stage.plugin.get_ceed_stages" title="Permalink to this definition"></a></dt>
<dd><p>Returns all the stage classes defined and exported in this file
(currently none for the internal plugin).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>stage_factory</strong> – The <a class="reference internal" href="../function/function.html#ceed.function.FunctionFactoryBase" title="ceed.function.FunctionFactoryBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionFactoryBase</span></code></a>
instance currently active in Ceed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ceed.stage.plugin.CSVStage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ceed.stage.plugin.</span></span><span class="sig-name descname"><span class="pre">CSVStage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.stage.plugin.CSVStage" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="stage.html#ceed.stage.CeedStage" title="ceed.stage.CeedStage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ceed.stage.CeedStage</span></code></a></p>
<p>Defines a stage whose shape frame values are read from a csv file.</p>
<p>The format of the CSV file is one column for each shape and color channel.
The top row contains the name of the shape followed by an underscore and the
color channel. E.g. if the shape is named <code class="docutils literal notranslate"><span class="pre">circle</span></code> and we have values for
its red channel, then the column name will be <code class="docutils literal notranslate"><span class="pre">circle_red</span></code>.</p>
<p>The remaining rows, each row in the column is the value of that shape’s
color channel for one frame. The total duration of the stage is the number
of frames (rows) divided by the frame rate. I.e. each row corresponds to a
frame, but the depending on the fps in Ceed it can be displayed at
different times.</p>
<p>Color channels not provided in the file are not set by the stage. E.g. if
the file only had one column headed with <code class="docutils literal notranslate"><span class="pre">circle_red</span></code>, the circle’s
green and blue channels won’t be set.</p>
<p>Values are forced to the <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1]</span></code> range.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ceed.stage.plugin.CSVStage.csv_path">
<span class="sig-name descname"><span class="pre">csv_path</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#ceed.stage.plugin.CSVStage.csv_path" title="Permalink to this definition"></a></dt>
<dd><p>The full path to the CSV file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ceed.stage.plugin.CSVStage.get_state">
<span class="sig-name descname"><span class="pre">get_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#ceed.stage.plugin.CSVStage.get_state" title="Permalink to this definition"></a></dt>
<dd><p>Returns a dict representation of the stage so that it can be
reconstructed later with <code class="xref py py-meth docutils literal notranslate"><span class="pre">apply_state()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>state</cite>: dict</dt><dd><p>A dict with the state, to which configuration items and their
values are added. If None, the default, a dict is created and
returned.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dict with all the configuration data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ceed.stage.plugin.CSVStage.add_func">
<span class="sig-name descname"><span class="pre">add_func</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#ceed.stage.plugin.CSVStage.add_func" title="Permalink to this definition"></a></dt>
<dd><p>Adds the function instance <a class="reference internal" href="../function/function.html#ceed.function.FuncBase" title="ceed.function.FuncBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ceed.function.FuncBase</span></code></a> to
<code class="xref py py-attr docutils literal notranslate"><span class="pre">functions</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> – The <a class="reference internal" href="../function/function.html#ceed.function.FuncBase" title="ceed.function.FuncBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ceed.function.FuncBase</span></code></a> to add.</p></li>
<li><p><strong>after</strong> – The <a class="reference internal" href="../function/function.html#ceed.function.FuncBase" title="ceed.function.FuncBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ceed.function.FuncBase</span></code></a> in <code class="xref py py-attr docutils literal notranslate"><span class="pre">functions</span></code>
after which to add this function, if not None, the default.</p></li>
<li><p><strong>index</strong> – The index in <code class="xref py py-attr docutils literal notranslate"><span class="pre">functions</span></code>
at which to add this function, if not None, the default.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ceed.stage.plugin.CSVStage.add_stage">
<span class="sig-name descname"><span class="pre">add_stage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#ceed.stage.plugin.CSVStage.add_stage" title="Permalink to this definition"></a></dt>
<dd><p>Adds a sub-stage instance <code class="xref py py-class docutils literal notranslate"><span class="pre">CeedStage</span></code> to <code class="xref py py-attr docutils literal notranslate"><span class="pre">stages</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stage</strong> – The <code class="xref py py-class docutils literal notranslate"><span class="pre">CeedStage</span></code> or ref to add.</p></li>
<li><p><strong>after</strong> – The <code class="xref py py-class docutils literal notranslate"><span class="pre">CeedStage</span></code> in <code class="xref py py-attr docutils literal notranslate"><span class="pre">stages</span></code>
after which to add this stage, if not None, the default.</p></li>
<li><p><strong>index</strong> – The index in <code class="xref py py-attr docutils literal notranslate"><span class="pre">stages</span></code>
at which to add this stage, if not None, the default.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ceed.stage.plugin.CSVStage.add_shape">
<span class="sig-name descname"><span class="pre">add_shape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#ceed.stage.plugin.CSVStage.add_shape" title="Permalink to this definition"></a></dt>
<dd><p>Creates and adds a <code class="xref py py-class docutils literal notranslate"><span class="pre">StageShape</span></code> instance wrapping the
<a class="reference internal" href="../shape/shape.html#ceed.shape.CeedShape" title="ceed.shape.CeedShape"><code class="xref py py-class docutils literal notranslate"><span class="pre">ceed.shape.CeedShape</span></code></a> <code class="docutils literal notranslate"><span class="pre">shape</span></code> to the <code class="xref py py-attr docutils literal notranslate"><span class="pre">shapes</span></code>. If
the <code class="docutils literal notranslate"><span class="pre">shape</span></code> was already added it doesn’t add it again.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>shape</cite>: <a class="reference internal" href="../shape/shape.html#ceed.shape.CeedShape" title="ceed.shape.CeedShape"><code class="xref py py-class docutils literal notranslate"><span class="pre">ceed.shape.CeedShape</span></code></a></dt><dd><p>The shape instance to add.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">StageShape</span></code> created if the shape wasn’t already added,
otherwise None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ceed.stage.plugin.CSVStage.get_settings_display">
<span class="sig-name descname"><span class="pre">get_settings_display</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#ceed.stage.plugin.CSVStage.get_settings_display" title="Permalink to this definition"></a></dt>
<dd><p>Returns widgets that will be displayed to the user in the stage
settings.</p>
<p>These widgets can be used to allow users to further configure custom
stages. This is called by the Ceed GUI when the settings are first
displayed to the user.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>stage_widget</strong> – The root settings widget to which the settings
will be added as grandchildren by the caller.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>It should return a dict of the name of each setting mapped to
the widget controlling the setting. It will be displayed in two
columns: the name followed by the widget on the same row.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ceed.stage.plugin.CSVStage.init_stage_tree">
<span class="sig-name descname"><span class="pre">init_stage_tree</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#ceed.stage.plugin.CSVStage.init_stage_tree" title="Permalink to this definition"></a></dt>
<dd><p>Before the stage is <code class="xref py py-meth docutils literal notranslate"><span class="pre">apply_pre_compute()</span></code> and started, the stage
and all sub-stages are recursively initialized.</p>
<p>Initializes the stage as part of the stage tree so it is ready
to be called to get the stage values as part of the tree. It is
called once for each stage of the entire stage tree.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>root</strong> – The root of the stage tree. If None, it’s self.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ceed.stage.plugin.CSVStage.tick_stage_loop">
<span class="sig-name descname"><span class="pre">tick_stage_loop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shapes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_end_t</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.stage.plugin.CSVStage.tick_stage_loop" title="Permalink to this definition"></a></dt>
<dd><p>If the stage was not pre-computed, ticks through one loop iteration
of the stage yielding the shape values for each time-point.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ceed.stage.plugin.CSVStage.get_stage_shape_names">
<span class="sig-name descname"><span class="pre">get_stage_shape_names</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ceed.stage.plugin.CSVStage.get_stage_shape_names" title="Permalink to this definition"></a></dt>
<dd><p>Gets all the names of the shapes controlled by the stage or
substages. If adding names, you must call <code class="docutils literal notranslate"><span class="pre">super</span></code> to get the
builtin shapes.</p>
<p>It calls <a class="reference internal" href="#ceed.stage.plugin.CSVStage.get_stage_shape_names" title="ceed.stage.plugin.CSVStage.get_stage_shape_names"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_stage_shape_names()</span></code></a> on its children, recursively,
so any of them can be overwritten to return arbitrary names (that must
be unique among all the shapes).</p>
<p>This is used to create the shape logs in the HDF5 data file. Because
for each shape we create a Nx4 array, where N is the number of Ceed
time frames, and 4 is for the RGBA value for that frame
(<a class="reference internal" href="../analysis/analysis.html#ceed.analysis.CeedDataReader.shapes_intensity" title="ceed.analysis.CeedDataReader.shapes_intensity"><code class="xref py py-attr docutils literal notranslate"><span class="pre">shapes_intensity</span></code></a>).</p>
<p>By default, it gets the name of the shapes from <code class="xref py py-attr docutils literal notranslate"><span class="pre">shapes</span></code> from
itself and its children stages. If you’re directly updating the
graphics, you can log rgba values by returning additional names here
and then setting their values when the stage is ticked, as if it was a
real shape. The values will then be accessible in
<a class="reference internal" href="../analysis/analysis.html#ceed.analysis.CeedDataReader.shapes_intensity" title="ceed.analysis.CeedDataReader.shapes_intensity"><code class="xref py py-attr docutils literal notranslate"><span class="pre">shapes_intensity</span></code></a>.</p>
<p>If you set the values of the additional shapes when the stage is ticked,
then the values will also show in the stage preview graph so you can use
it to display arbitrary rgb data for your stage in the graph. But it
must be logged during stage tick (e.g. <code class="xref py py-meth docutils literal notranslate"><span class="pre">evaluate_stage()</span></code>), not
during the actual graphing in <code class="xref py py-meth docutils literal notranslate"><span class="pre">set_gl_colors()</span></code> that follows each
tick.</p>
<p>See the stage example plugins for example usage.</p>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="stage.html" class="btn btn-neutral float-left" title="Stage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="widgets.html" class="btn btn-neutral float-right" title="Stage widgets" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, Matthew Einhorn.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>